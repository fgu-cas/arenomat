<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
	<h4 class="modal-title">Load experiment</h4>

</div>  
<div class="modal-body">  
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<tr>
				<th>name</th>
				<th colspan="2">action</th>
			</tr>
			{{#experiments}}
			<tr>
				<td align=top>{{name}}</td>
				<td><a href="#del" class="del" data-experiment="{{name}}">del</a></td>
				<td><a href="#load" class="load" data-experiment="{{name}}">load</a></td>
			</tr>
			{{/experiments}}
		</table>
	</div>
</div>  


<script>

	$(document).ready(function() {

		$(".load").click(function(e) {
			$.get('/experiments/' + $(this).data('experiment'), function(data) {
				Blockly.mainWorkspace.clear();
				var xml = Blockly.Xml.textToDom(data.xml);
				Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xml);
				$('#modal').modal('hide')
			});
			e.preventDefault();
		});

		$(".del").click(function(e) {
			var name = $(this).data('experiment');
			bootbox.confirm("Do you really want to delete: " + name + "?", function(result) {
				if (result) {
					$.ajax({url: "/experiments/" + name, type: "DELETE"}).done(function (data) {
					    location.reload();
					    console.log(data);
					});
				}
			});
			e.preventDefault();
		});

	});

</script>