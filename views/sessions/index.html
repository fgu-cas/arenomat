<div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
	<h4 class="modal-title">Load session</h4>

</div>  
<div class="modal-body">  
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<tr>
				<th>name</th>
				<th colspan="2">action</th>
			</tr>
			{{#sessions}}
			<tr>
				<td align=top>{{name}}</td>
				<td><a href="#del" class="del" data-session="{{name}}">del</a></td>
				<td><a href="#load" class="load" data-session="{{name}}">load</a></td>
			</tr>
			{{/sessions}}
		</table>
	</div>
</div>  


<script>

	$(document).ready(function() {

		$(".load").click(function(e) {
			$.get('/sessions/' + $(this).data('session'), function(data) {
				Blockly.mainWorkspace.clear();
				var xml = Blockly.Xml.textToDom(data.xml);
				Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xml);
				$('#modal').modal('hide')
			});
			e.preventDefault();
		});

		$(".del").click(function(e) {
			var name = $(this).data('session');
			bootbox.confirm("Do you really want to delete: " + name + "?", function(result) {
				console.log(result);
				if (result)
					$.ajax({url: "/sessions/" + name, type: "DELETE"});
			});
			e.preventDefault();
		});

	});

</script>